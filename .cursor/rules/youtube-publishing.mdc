---
description: workflow for uploading videos to youtube — applies when the user asks about publishing, uploading, autopilot, or checking video status
alwaysApply: false
---

# youtube publishing

how to manage the render-to-youtube pipeline.

## the pipeline

```
rendered MP4s (with embedded metadata)
       │
       ▼
autopilot.py ──→ uploads as public at random times
       │              ──→ renders more when pool is low
       ▼
upload-manifest.json (tracks what's been uploaded)
```

each video has a title and description baked in by multi-layer.py. the autopilot picks videos from the output dir and uploads them directly as public. no scheduling, no private-then-public dance. the organic timing comes from per-tick probability math.

## autopilot

the autopilot (`tools/autopilot.py`) runs via hourly cron. each tick:

1. **check the pool** — if fewer than 10 videos are ready, render a batch
2. **roll the dice** — spread remaining daily uploads across remaining hours in the window, with ±30% jitter. morning ticks rarely fire, evening ticks almost always do.
3. **upload 1-2** — if the dice hit, upload as public and delete the file from disk

no phases, no bursts, no quiet periods. just steady 6/day at random times.

### the per-tick math

```
upload_chance = remaining_today / hours_left_in_window * jitter(0.7, 1.3)
```

at 9am with 6 uploads left and 14 hours in the window: ~30% chance. at 8pm with 2 left and 3 hours: ~90% chance. occasionally uploads 2 in one tick (15% chance when 3+ remaining). looks like a person.

### commands

```bash
# check status
python3 tools/autopilot.py --project first-blend-test --status

# dry-run a tick
python3 tools/autopilot.py --project first-blend-test --dry-run

# run a tick for real
python3 tools/autopilot.py --project first-blend-test
```

### rhythm config

each project has a `rhythm.json`:

```json
{
  "window_hours": ["06:00", "23:00"],
  "uploads_per_day": 6,
  "render_batch_size": [20, 40],
  "render_when_below": 10,
  "render_preset": "classic-white",
  "delete_after_upload": true
}
```

lives at `projects/PROJECT_NAME/rhythm.json`. autopilot reads it each tick.

### cron

```bash
0 * * * * cd /path/to/collide-o-scope && python3 tools/autopilot.py --project first-blend-test >> /var/log/autopilot.log 2>&1
```

### files

- `projects/PROJECT_NAME/upload-manifest.json` — tracks uploads (filename, video_id, timestamp, url). gitignored.
- `projects/PROJECT_NAME/autopilot-state.json` — just the RNG seed. gitignored.
- `projects/PROJECT_NAME/rhythm.json` — config. committed.

## manual commands

### upload a single video

```bash
python3 scripts/upload/youtube-upload.py --file path/to/video.mp4 --public
```

### bulk upload from a schedule (legacy)

```bash
python3 scripts/upload/youtube-upload.py \
  --schedule projects/PROJECT_NAME/output/schedule.json \
  --public --limit 6
```

### delete videos from youtube

```bash
python3 scripts/upload/youtube-delete.py --ids VIDEO_ID1 VIDEO_ID2
```

## rules

- **always dry-run first.** `--dry-run` before anything real.
- **never touch credential files.** `client_secret.json` and `token.json` are gitignored.
- **never force-upload failed entries** without investigating why.

### current project

active project is `first-blend-test`. videos in `projects/first-blend-test/output/`. manifest at `projects/first-blend-test/upload-manifest.json`.
